(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{7532:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return t(32916)}])},32916:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var a,i,r=t(26042),l=t(69396),o=t(85893),s=t(11163),c=t(67294),u=t(27501),d=t(99166),p=t(89731),f=t(47568),h=t(70655),m=new(t(96810)).xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDFEYmI5OTg0QURmNGJiNjJBRTVkNGFjNTZiNkE2MDFCZTQ3NjhBZjEiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2NjYzMzYwNzMzMzYsIm5hbWUiOiJraXRlIn0.SojcHoitv-I9V3-mGShVo_GifvaBdWR1V4kzTavPZx0"}),g=(a=(0,f.Z)(function(e,n){var t,a;return(0,h.__generator)(this,function(i){return t=JSON.stringify(e),a=new File([t],null!=n?n:"file.json",{type:"application/json"}),[2,x(a)]})}),function(e,n){return a.apply(this,arguments)}),x=(i=(0,f.Z)(function(e){var n;return(0,h.__generator)(this,function(t){switch(t.label){case 0:return[4,m.put([e])];case 1:return n=t.sent(),[2,"https://w3s.link/ipfs/".concat(n,"/").concat(e.name)]}})}),function(e){return i.apply(this,arguments)}),b={name:"",description:"",price:""},j=function(){var e=(0,s.useRouter)(),n=(0,u.mx)().data,t=(0,p.Z)(),a=(0,c.useRef)(),i=(0,c.useState)(null),f=i[0],h=i[1],m=(0,c.useState)(b),j=m[0],N=m[1],v=(0,c.useState)(null),w=v[0],y=v[1],k=(0,c.useState)(""),Z=k[0],_=k[1],C=(0,c.useState)(!1),I=C[0],J=C[1],E=I||Boolean(w),O=(0,u.cq)((0,l.Z)((0,r.Z)({},t),{signerOrProvider:n})),T=(0,u.BX)({hash:null==w?void 0:w.hash}).data,U=(0,c.useCallback)(function(e){e.preventDefault();var n=j.name,t=j.description;n&&t&&f&&(J(!0),_("Uploading image, please wait"),x(f).then(function(e){return console.log("Uploaded image: ".concat(e)),_("Uploading metadata, please wait"),g({name:n,description:t,image:e})}).then(function(e){return console.log("Uploaded metadata: ".concat(e)),_("Creating NFT"),O.createToken(e)}).then(function(e){_("Waiting txn confirmation"),y(e)}).catch(function(e){_(""),alert("Create error: ".concat(e)),console.log(e)}).finally(function(){return J(!1)}))},[O,j,f]);return(0,c.useEffect)(function(){T&&e.push("/")},[T,e]),(0,o.jsx)(d.Z,{children:(0,o.jsx)("div",{className:"mt-10 flex flex-col justify-center",children:(0,o.jsxs)("form",{ref:a,onSubmit:U,children:[(0,o.jsx)("div",{className:"mb-8 text-lg font-bold",children:"Create your post as NFT"}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("label",{children:[(0,o.jsx)("div",{className:"mb-2 block text-sm font-bold",children:"Name"}),(0,o.jsx)("input",{className:"w-full appearance-none rounded-lg border py-2 px-3 leading-tight text-gray-700 focus:outline-none",required:!0,type:"text",placeholder:"",onChange:function(e){return N(function(n){return(0,l.Z)((0,r.Z)({},n),{name:e.target.value})})},value:j.name,disabled:E})]})}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("label",{children:[(0,o.jsx)("div",{className:"mb-2 block text-sm font-bold",children:"Description"}),(0,o.jsx)("textarea",{className:"w-full appearance-none rounded-lg border py-2 px-3 leading-tight text-gray-700 focus:outline-none",cols:40,rows:5,required:!0,placeholder:"",value:j.description,onChange:function(e){return N(function(n){return(0,l.Z)((0,r.Z)({},n),{description:e.target.value})})},disabled:E})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("label",{children:[(0,o.jsx)("div",{className:"mb-2 block text-sm font-bold",children:"Upload Image"}),(0,o.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/gif",disabled:E,onChange:function(e){var n;return h((null===(n=e.target.files)||void 0===n?void 0:n[0])||null)}})]})}),(0,o.jsx)("div",{className:"py-8 text-center text-green-400",children:Z}),(0,o.jsx)("button",{type:"submit",disabled:E,className:"mt-5 rounded-2xl bg-blue-500 py-2 px-4 font-bold text-white shadow-lg",children:I?"Uploading...":w?"Waiting...":"Create"})]})})})}}},function(e){e.O(0,[204,764,715,632,774,888,179],function(){return e(e.s=7532)}),_N_E=e.O()}]);